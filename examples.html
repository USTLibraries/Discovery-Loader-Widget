<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Discovery Loader Widgit Example/Test Page</title>


<meta name="viewport" content="width=device-width">

<!-- Bring in the JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
</head>

<body>


<h1>Discovery Documentation and Test Page</h1>

<p>Note: Any links to static.stthomas.edu may become out of date as it is a live, production site.</p>

<p>The most up to date, sharable code, is available via the <a href="https://github.com/USTLibraries/Discovery-Loader-Widget">USTLibraries GitHub page</a>.</p>

<div style="max-width: 800px; padding: 20px 20px 20px 20px; border: solid 1px">

    <!-- search box -->
    <div class="discovery-search-widget"
            id="discoverySearch111"
            data-tagline="Type your search term(s):"
            data-placeholder="Search for articles, books, and more"
            data-advanced="default"
        ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
        <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
    <!-- end search box -->

</div>


<p>The js and css code is fully documented with comments.</p>
<p>What you will need:</p>
<ul>
  <li>A place to host your css and js files</li>
  <li>A basic understanding of 3 HTML tags (<tt>DIV</tt>, <tt>A</tt>, <tt>SCRIPT</tt>), tag attributes (<tt>data-</tt>, <tt>href</tt>, <tt>src</tt>), and setting variables in JavaScript (Don't worry, it's all heavily commented)</li>
  <li>jQuery and jQuery UI loaded on the page (works without autosuggest if no jQuery UI). If you need to add jQuery to your HEAD yourself: 
   <pre>
   &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"&gt;&lt;/script&gt;
   &lt;script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"&gt;&lt;/script&gt;</pre></li>
</ul>
<p>Files:</p>
<ul>
  <li><a href="index.html">index.html</a> (a redirect to your main search page)</li>
  <li><a href="discovery-loader.js">discovery-loader.js</a> (the script src we hard code in the html)</li>
  <li><a href="discovery.js">discovery.js</a> (can be renamed to what you want (e.g. summon.js))</li>
  <li><a href="discovery.css">discovery.css</a> (can be renamed to what you want (e.g. summon.css))</li>
  <li>readme.html (this file)</li>
</ul>
<p>Functionality:</p>
<ul>
  <li>Work on main website and LibGuides 2.0 </li>
  <li>Won't conflict with other widgets of the same kind if mulitple on one page (even if not unique element ID)</li>
  <li>Degrades gracefully if no JavaScript (Display a default link to the discovery search page)</li>
  <li>Degrades gracefully if no jQuery, falling back to a simple html search form with no scoping [<a href="nojquery.html">see example</a>]</li>
  <li>Degrades gracefully if no jQuery UI, and will not attempt autosuggest</li>
  <li>If jQuery UI available, it will have an autosuggest</li>
  <li>Enter key will issue search and on screen &quot;Search&quot; key on iOS and Android will initiate search</li>
  <li>Compatible with Windows (IE, Chrome, Firefox), Mac (Safari, Chrome, Firefox), iOS (Safari, Chrome, Firefox), Android (Chrome, Firefox)</li>
  <li>Responsive</li>
  <li>Meets Accessibility standards (Has a label for screen readers and the submit button is marked)</li>
</ul>
<p>Documentation that walks you through the code and logic may be found in the comments of the source of this page and the source of the scripts and css. So be sure to view the plain HTML source for a greater, technical, understanding.</p>
<script>
/* THIS SCRIPT TAG IS JUST FOR THIS TEST PAGE, OR ANY TEST PAGE AND IS NOT INTENDED TO BE IN PRODUCTION! */
/*

OPTIONAL!
In production you aren't setting the GLOBAL javascript variable "discovery_style". It is used for testing purposes.
You DO NOT need to include this little script code in your copy and paste of the widget.

These variables can be used to switch the discovery-loader.js from DEVELOPMENT to PRODUCTION mode.
Place the code for a global variable discovery_style on a page that you are testing on (in a test environment such as this page)
and force it to use OLD or NEW.

What is OLD and NEW? Well that is defined in the discovery-loader.js
The discovery-loader.js serves a few functions:
1. Be an updatable intermediary that loads the most current javascript for creating the search box
2. Allow new code to be launched after a specified date/time, say you want to launch a new design of the search box at 9am Sept 30th. It will serve the old design until that time and then start pointing to the new design
3. Allow you to specify that a page (test page on a development server) should be showing NEW (unlaunched) code rather than current code that is in production

*/

// NOTE: by default the loader goes by a date timer listed in discovery-loader. We can force OLD or NEW here, or not set discovery_style

/* FORCE old OR new (OPTIONAL) */
//discovery_style = "OLD"; // force old
discovery_style = "NEW"; // force new

// If we are forcing the NEW, let the developer knew (just in case they are trying to troubleshoot problems with current code in production!
if ( typeof( discovery_style ) != "undefined" && discovery_style === "NEW") { 
	document.write("<H1 style='color:red'>Using Possible unreleased code!</h1>");
}
</script>

<p>This link here goes to a redirect that takes the user to the main search page. We are using a redirect so that we are not 
hard coding a link that may change (for example, when we switch from Summon to Primo)</p>
<p><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></p>

<P>This link is used at placeholder text within the &lt;div&gt; tag and is replaced by the search form. Or, if JavaScript is not enabled, remains as a means of getting to the main search page.... on which JavaScript will be required.</P>


<p>Basic format that we copy and paste into our CMS is:</p>
<pre>
&lt;div class="discovery-search-widget"&gt;
    &lt;a href="https://static.stthomas.edu/libraries/discovery"&gt;Search Library Resources&lt;/a&gt;
&lt;/div&gt;
&lt;script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"&gt;&lt;/script&gt;</pre>

<p>Here are a series of search boxes with different scopes, taglines, and placeholders. View source to see the code or scroll to the bottom of this page for samples</p>

<hr />


<h2>Library Home Page</h2>

<!-- search box -->
<div class="discovery-search-widget"
        id="discoverySearch001"
        data-tagline="Type your search term(s):"
        data-placeholder="Search for articles, books, and more"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end search box -->

<hr />

<h2>BOOKS</h2>

<!-- books keyword search box -->
    <div class="discovery-search-widget"
        id="discoverySearchBooks001"
        data-scope=""
        data-scope-content-type="BOOKS"
        data-tagline="Book search keywords:"
        data-placeholder="Book keywords"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end books keyword search box -->

<h2>BOOKS by TITLE</h2>

<!-- books title search box -->
    <div class="discovery-search-widget"
        id="discoverySearchBooks002"
        data-scope="title"
        data-scope-content-type="BOOKS"
        data-tagline="Type as much or as little of the book title as you want:"
        data-placeholder="Book title keywords"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end books title search box -->

<h2>BOOKS by AUTHOR</h2>

<!-- books author search box -->
    <div class="discovery-search-widget"
        id="discoverySearchBooks003"
        data-scope="author"
        data-scope-content-type="BOOKS"
        data-tagline="Type the book author's last or full name:"
        data-placeholder="Book author name"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end books author search box -->


<hr />

<h2>FILMS</h2>

<!-- films search box -->
    <div class="discovery-search-widget"
        id="discoverySearchFilms001"
        data-scope=""
        data-scope-content-type="FILMS"
        data-tagline="Type your search term(s):"
        data-placeholder="Search for streaming videos and DVDs:"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end films search box -->

<h2>FILMS by TITLE</h2>

<!-- films title search box -->
    <div class="discovery-search-widget"
        id="discoverySearchFilms002"
        data-scope="title"
        data-scope-content-type="FILMS"
        data-tagline="Type as much or as little of the title as you want:"
        data-placeholder="Title keywords"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- end films title search box -->

<h2>FILMS by AUTHOR</h2>

<!-- films author search box -->
    <div class="discovery-search-widget"
        id="discoverySearchFilms003"
        data-scope="author"
        data-scope-content-type="FILMS"
        data-tagline="Type the author's last or full name:"
        data-placeholder="Author name"
    ><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
    <script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!--end films author search box -->

<hr />

<h2>MUSIC</h2>
<p>Music is currently not scoped by Content-Type</p>

<!-- music search box -->
<div class="discovery-search-widget"
    id="discoverySearchMusic001"
    data-scope-content-type="MUSIC"
    data-tagline="Type your search term(s):"
    data-placeholder="Search for articles, books, and more"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
<!-- music search box -->

<h2>MUSIC by TITLE</h2>
<div class="discovery-search-widget"
    id="discoverySearchMusic002"
	data-scope="title"
    data-scope-content-type="MUSIC"
    data-tagline="Type as much or as little of the title as you want:"
    data-placeholder="Title keywords"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>MUSIC by AUTHOR</h2>
<div class="discovery-search-widget"
    id="discoverySearchMusic003"
	data-scope="author"
    data-scope-content-type="MUSIC"
    data-tagline="Type the author's last or full name:"
    data-placeholder="Author name"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<hr />
<h1>More Examples</h1>
<p>Again, view source to see how these are implemented.</p>

<h2>Default</h2>
<div class="discovery-search-widget"
    id="discoverySearchDefault"
    data-placeholder="default"
    data-advanced="default"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Plain</h2>

<div class="discovery-search-widget">
<a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a>
</div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Custom content-type</h2>
<p>we've set data-scope-content-type to something other than 'BOOKS', 'MUSIC', or 'FILMS'.</p>

<div class="discovery-search-widget"
    id="discoverySearch125"
    data-scope-content-type="Newspaper Article,Journal Article,Book Review"
    data-tagline="default"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Discipline</h2>
<div class="discovery-search-widget"
    id="discoverySearch126"
    data-scope-discipline="Computer Science"
    data-tagline="Search within computer science:"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Date Scoping</h2>
<div class="discovery-search-widget"
    id="discoverySearch127"
    data-scope-date="2015-01-01:2016-01-01"
    data-tagline="Search within 2015:"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Full Text Scoping</h2>
<div class="discovery-search-widget"
    id="discoverySearch128"
    data-scope-fulltext="true"
    data-tagline="Full text only:"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Scholarly publications Scoping</h2>
<div class="discovery-search-widget"
    id="discoverySearch129"
    data-scope-scholarly="true"
    data-tagline="Scholarly publications only:"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>St. Thomas only Scoping</h2>
<div class="discovery-search-widget"
    id="discoverySearch130"
    data-scope-local="true"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>

<h2>Subject Term Scoping</h2>
<div class="discovery-search-widget"
    id="discoverySearch135"
    data-scope-subj-terms="philosophy,history"
    data-tagline="Philosophy History:"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>


<hr />


<h1>What are the div attributes available?</h1>

<P>I used Matthew Reidsma's Summon HTML form creator as a guide as to what fields we can search on.</P>
<p><a href="http://static.stthomas.edu/libraries/summonwidget/">GVSU Static HTML Widget Creator</a></p>

<h2>div attributes:</h2>

<style>
dt { font-weight: 800; }
textarea { width: 80%; height: 900px; max-width:800px; }
</style>
<p>All attributes are optional. you can do:</p>
<pre>
&lt;div class="discovery-search-widget"&gt;
    &lt;a href="https://static.stthomas.edu/libraries/discovery"&gt;Search Library Resources&lt;/a&gt;
&lt;/div&gt;
&lt;script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"&gt;&lt;/script&gt;</pre>
<p>... if you want.</p>
 <dl>
  <dt>id</dt>
  <dd><em>[unique element id]</em> - if it is not unique, the script will make it unique so there won't be conflicts</dd>
  
  <dt>data-scope</dt>
  <dd><em>author|title</em> - these will automatically add AuthorCombined() or TitleCombined() to the search query when submitted.</dd>
  
  <dt>data-scope-content-type</dt>
  <dd><em>MUSIC|BOOKS|FILMS|[or comma separated values]</em> - BOOKS, FILMS, and MUSIC (all upper and used alone) are predefined: BOOKS = "Book Chapter,Book / eBook"; FILMS = "Video Recording,Streaming Video"; MUSIC = "" (unscoped as of now but reserved for future use); example of 'other': data-scope-content-type="Newspaper Article, Journal Article, Book Review"</dd>
  
  <dt>data-scope-subj-terms</dt>
  <dd><em>[comma separated values]</em> - Subject terms to go with each search</dd>
  
  <dt>data-scope-date</dt>
  <dd><em>[YYYY-MM-DD:YYYY-MM-DD]</em> - date in YYYY-MM-DD:YYYY-MM-DD format (ex: 2015-01-01:2016-01-01 searches from Jan 1, 2015 to Jan 1, 2016)</dd>
  
  <dt>data-scope-discipline</dt>
  <dd><em>[discipline1,discipline2...]</em> - comma separated disciplines, or a single discipline: data-scope-discipline="Computer Science"</dd>
  
  <dt>data-scope-fulltext</dt>
  <dd><em>true|false</em> - include full text only. Not including this attribute defaults to FALSE</dd>
   
  <dt>data-scope-scholarly</dt>
  <dd><em>true|false</em> - include scholarly only. Not including this attribute defaults to FALSE</dd>
   
  <dt>data-scope-local</dt>
  <dd><em>true|false</em> - search within UST catalog only. Not including this attribute defaults to FALSE</dd>
   
  </dl>
  
  <dl>
   <dt>data-tagline</dt>
  <dd><em>default|[custom text]</em> - set as "default" or to your own custom text. If you don't include this attribute, or if you leave it blank ("") no text will display in its place.</dd>
   
   <dt>data-placeholder</dt>
  <dd><em>default|[custom text]</em> - set as "default" or to your own custom text. If you don't include this attribute, or if you leave it blank ("") no text will display in its place.</dd>
</dl> 


	 

<textarea>

<!-- plain with default tagline and placeholder -->
<div class="discovery-search-widget"
    id="discoverySearchDefault"
    data-placeholder="default"
    data-advanced="default"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>


<!-- example of title search for BOOKS -->
<div class="discovery-search-widget"
    id="discoverySearch001"
    data-scope="title"
    data-scope-content-type="BOOKS"
    data-tagline="Type as much or as little of the title as you want:"
    data-placeholder="Title keywords"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>


<!-- plain with no placeholder or tags -->
<div class="discovery-search-widget">
<a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>


<!-- comma separated content type -->
<div class="discovery-search-widget"
    id="discoverySearch125"
    data-scope-content-type="Newspaper Article,Journal Article,Book Review"
    data-tagline="default"
><a href="https://static.stthomas.edu/libraries/discovery">Search Library Resources</a></div>
<script type="text/javascript" src="//static.stthomas.edu/libraries/js/discovery/discovery-loader.js"></script>
</textarea>

<h1>Further info:</h1>

<h2>The Scripts/CSS Files</h2>

<dl>
  <dt>Loader JS (called from the static HTML code listed above)</dt>
  <dd><em><a href="https://static.stthomas.edu/libraries/js/discovery/discovery-loader.js">https://static.stthomas.edu/libraries/js/discovery/discovery-loader.js</a></em> - Loads the most current form builder script. As the main script goes through revisions I can plug in what version to use in the loader script. (See source for more info)</dd>
  
   <dt>Search Builder JS (The actual script that produces the search box)</dt>
  <dd><em><a href="https://static.stthomas.edu/libraries/js/discovery/summon-20160913.js">https://static.stthomas.edu/libraries/js/discovery/summon-20160913.js</a></em> - This is pointed to in the loader. For example if we tweak the form code it will be summon-20160930.js, if we move to a different search provider we could call it primo-20170530.js where the number is just the date of the version in YYYYMMDD format, but really any path and naming convention can be used. Name it what ever you want and use this as the file name in the loader js file.</dd>
  
   <dt>Style Sheet CSS (Responsive, accessible, sleek)</dt>
  <dd><em><a href="https://static.stthomas.edu/libraries/js/discovery/summon-20160913.css">https://static.stthomas.edu/libraries/js/discovery/summon-20160913.css</a></em> - This is pointed to in the loader. For example if we tweak the form style it will be summon-20160930.css, if we move to a different search provider we could call it primo-20170530.css where the number is just the date of the version in YYYYMMDD format, but really any path and naming convention can be used. Name it what ever you want and use this as the file name in the loader js file.</dd>
  
</dl>

</body>
</html>
